const options = [
    {
        "text": "Alicante",
        "value": "ALC"
    },
    {
        "text": "Amsterdam",
        "value": "AMS"
    },
    {
        "text": "Ancona",
        "value": "AOI"
    },
    {
        "text": "Athen",
        "value": null
    },
    {
        "text": "Azoren",
        "value": null
    },
    {
        "text": "Banja Luka",
        "value": "BNX"
    },
    {
        "text": "Barcelona",
        "value": "BCN"
    },
    {
        "text": "Basel",
        "value": "BSL"
    },
    {
        "text": "Belfast",
        "value": "BFS"
    },
    {
        "text": "Berlin Brandenburg",
        "value": "BER"
    },
    {
        "text": "Billund",
        "value": "BLL"
    },
    {
        "text": "Bologna",
        "value": "BLQ"
    },
    {
        "text": "Bordeaux",
        "value": "BOD"
    },
    {
        "text": "Bratislava",
        "value": "BTS"
    },
    {
        "text": "Bremen",
        "value": "BRE"
    },
    {
        "text": "Brüssel",
        "value": "BRU"
    },
    {
        "text": "Budapest",
        "value": "BUD"
    },
    {
        "text": "Cologne",
        "value": "CGN"
    },
    {
        "text": "Danzig",
        "value": null
    },
    {
        "text": "Dortmund",
        "value": "DTM"
    },
    {
        "text": "Dresden",
        "value": "DRS"
    },
    {
        "text": "Dublin",
        "value": "DUB"
    },
    {
        "text": "Dusseldorf Weeze",
        "value": "NRN"
    },
    {
        "text": "Edinburgh",
        "value": "EDI"
    },
    {
        "text": "Faro",
        "value": "FAO"
    },
    {
        "text": "Fas",
        "value": "FEZ"
    },
    {
        "text": "Frankfurt-Hahn",
        "value": "HHN"
    },
    {
        "text": "Fuerteventura",
        "value": "FUE"
    },
    {
        "text": "Girona",
        "value": null
    },
    {
        "text": "Glasgow",
        "value": "GLA"
    },
    {
        "text": "Gran Canaria",
        "value": null
    },
    {
        "text": "Hamburg",
        "value": "HAM"
    },
    {
        "text": "Ibiza",
        "value": "IBZ"
    },
    {
        "text": "Katowice",
        "value": "KTW"
    },
    {
        "text": "Kefalonia",
        "value": null
    },
    {
        "text": "Kerry",
        "value": "KIR"
    },
    {
        "text": "Knock Westirland",
        "value": "NOC"
    },
    {
        "text": "Kopenhagen",
        "value": "CPH"
    },
    {
        "text": "Krakaw",
        "value": "KRK"
    },
    {
        "text": "Köln",
        "value": "CGN"
    },
    {
        "text": "Lamezia",
        "value": "SUF"
    },
    {
        "text": "Lissabon",
        "value": "LIS"
    },
    {
        "text": "Liverpool",
        "value": "LPL"
    },
    {
        "text": "London Gatwick",
        "value": "LGW"
    },
    {
        "text": "London Luton",
        "value": "LTN"
    },
    {
        "text": "London",
        "value": "SEN"
    },
    {
        "text": "Madrid",
        "value": "MAD"
    },
    {
        "text": "Malaga",
        "value": "AGP"
    },
    {
        "text": "Malta",
        "value": "MLA"
    },
    {
        "text": "Manchester",
        "value": "MAN"
    },
    {
        "text": "Marrakesch",
        "value": "RAK"
    },
    {
        "text": "Marseille",
        "value": "MRS"
    },
    {
        "text": "Memmingen",
        "value": "FMM"
    },
    {
        "text": "Milan Bergamo",
        "value": "BGY"
    },
    {
        "text": "Neapel",
        "value": "JKR"
    },
    {
        "text": "Newquay Cornwall",
        "value": "NQY"
    },
    {
        "text": "Nizza",
        "value": null
    },
    {
        "text": "Nürnberg",
        "value": "NUE"
    },
    {
        "text": "Oslo",
        "value": "OSL"
    },
    {
        "text": "Palermo",
        "value": "PMO"
    },
    {
        "text": "Palma de Mallorca",
        "value": "PMI"
    },
    {
        "text": "Paphos",
        "value": "PFO"
    },
    {
        "text": "Paris",
        "value": "PAR"
    },
    {
        "text": "Pescara",
        "value": "PSR"
    },
    {
        "text": "Pisa",
        "value": "PSA"
    },
    {
        "text": "Pisa",
        "value": "PSA"
    },
    {
        "text": "Prag",
        "value": "PRG"
    },
    {
        "text": "Rijeka",
        "value": "RJK"
    },
    {
        "text": "Rome",
        "value": "ROM"
    },
    {
        "text": "Salzburg",
        "value": "SZG"
    },
    {
        "text": "Santander",
        "value": "SDR"
    },
    {
        "text": "Sevilla",
        "value": "SVQ"
    },
    {
        "text": "Shannon",
        "value": "SNN"
    },
    {
        "text": "Sofia",
        "value": "SOF"
    },
    {
        "text": "Split",
        "value": "SPU"
    },
    {
        "text": "Strasbourg",
        "value": "SXB"
    },
    {
        "text": "Stockholm",
        "value": "VST"
    },
    {
        "text": "Tallinn",
        "value": "TLL"
    },
    {
        "text": "Teneriffa",
        "value": "TFN"
    },
    {
        "text": "Valencia",
        "value": "VLC"
    },
    {
        "text": "Venedig",
        "value": "VCE"
    },
    {
        "text": "Warschau",
        "value": "WAW"
    },
    {
        "text": "Zadar",
        "value": "ZAD"
    },
    {
        "text": "Zagreb",
        "value": "ZAG"
    }
]

async function doHotRequest() {
    for (const airport of options) {
        const {
            text, value
        } = airport
        console.log(airport.value)
        let fromWhere = airport.value;
        var today = new Date();
        var nextSevenDay = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)


        let startDate = today.toISOString().split('T')[0];
        let endDate = nextSevenDay.toISOString().split('T')[0];
        let RYAN_AIR_API_URL = `https://services-api.ryanair.com/farfnd/3/oneWayFares?&departureAirportIataCode=${fromWhere}&language=en&limit=30&market=en-gb&offset=0&outboundDepartureDateFrom=${startDate}&outboundDepartureDateTo=${endDate}&priceValueTo=25`;
        let res = await axios.get(`${RYAN_AIR_API_URL}`);
        let data = res.data;
        const table = document.querySelector("table");
        const hot_tickets = []; 

        if (data.total >= 1) {
            hot_tickets.push(data)
        }
        document.getElementById("so_hot_tickets_table").style.visibility = "visible";
        for (let i = 0; i < hot_tickets.length; i++) {
            var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

            var row = table.insertRow();
            var cell = row.insertCell();

            cell.innerHTML = data.fares[i].outbound.departureAirport.countryName

            var cell = row.insertCell();
            cell.innerHTML = data.fares[i].outbound.departureAirport.name


            var cell = row.insertCell();
            cell.innerHTML = data.fares[i].outbound.arrivalAirport.countryName

            var cell = row.insertCell();
            cell.innerHTML = data.fares[i].outbound.arrivalAirport.name

            var cell = row.insertCell();
            cell.innerHTML = data.fares[i].outbound.flightNumber

            var cell = row.insertCell();
            cell.innerHTML = data.fares[i].outbound.price.value

            var cell = row.insertCell();
            cell.innerHTML = data.fares[i].outbound.price.currencyCode

            var cell = row.insertCell();
            cell.innerHTML = data.fares[i].outbound.departureDate

            var d = new Date(data.fares[i].outbound.departureDate);
            var dayName = days[d.getDay()];

            var cell = row.insertCell();
            cell.innerHTML = dayName

            var cell = row.insertCell();
            var departureDate = data.fares[i].outbound.departureDate
            let BUY_URL = `https://www.ryanair.com/gb/en/trip/flights/select?adults=1&dateOut=${departureDate.slice(0, 10)}&originIata=${data.fares[i].outbound.departureAirport.iataCode}&destinationIata=${data.fares[i].outbound.arrivalAirport.iataCode}`
            cell.innerHTML = `<a href="${BUY_URL}" class="btn btn-outline-success">BUY</a>`

        }


    }

}